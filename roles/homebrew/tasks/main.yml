---
- name: Create bash_profile
  file:
    path: ~/.bash_profile
    state: touch

- name: Configure homebrew path
  lineinfile:
    path: ~/.bash_profile
    regexp: "^export PATH"
    line: "export PATH=\"/usr/local/bin:$PATH\""

- name: Update homebrew
  homebrew:
    update_homebrew: yes
    upgrade_all: yes
  tags:
  - brew
  - cask

- name: Install base homebrew packages
  homebrew:
    name: "{{ item.name }}"
    install_options: "{{ item.install_options | default('') }}"
    state: present
  with_items: "{{ base_brew_packages }}"
  tags:
  - brew

- name: Install base homebrew cask packages
  homebrew_cask:
    name: "{{ item.name }}"
    install_options: "{{ item.install_options | default('') }}"
    state: present
  with_items: "{{ base_brew_cask_packages }}"
  tags:
  - cask

- name: Configure OSX
  command: "{{ item }}"
  become: yes
  with_items: "{{ base_osx_config }}"
  tags:
   - configure